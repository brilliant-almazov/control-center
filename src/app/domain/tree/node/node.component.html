<div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign=" center" class="item" *ngIf="isRenderRoot"
     [class.changed]="node.isChanged">
    <div style="position: relative;white-space: nowrap">
        <button mat-icon-button class="icon-button" [disabled]="expandButtonDisabled" (click)="toggle(node, true)">
            <mat-icon style="color: #ccc">{{expandAllIcon}}</mat-icon>
        </button>
        <button mat-icon-button class="icon-button" [disabled]="expandButtonDisabled" (click)="toggle(node)">
            <mat-icon [color]="expandIcon.color">{{expandIcon.name}}</mat-icon>
            <mat-icon *ngIf="badgeIcon" [color]="badgeIcon.color" class="badge">{{badgeIcon.name}}</mat-icon>
        </button>
    </div>
    <div [ngSwitch]="node.list" fxFlex="grow" style="overflow: hidden;">

        <mat-form-field *ngSwitchCase="'select'" class="field">
            <mat-label>
                <cc-label [node]="node"></cc-label>
            </mat-label>
            <mat-select (selectionChange)="node.select.selectionChange($event)" [(value)]="node.select.selected">
                <mat-option>
                    <mat-icon inline style="vertical-align: top">cancel</mat-icon>
                    None
                </mat-option>
                <mat-option *ngFor="let option of node.select.options" [value]="option.value">
                    {{option.name}}
                </mat-option>
            </mat-select>
            <mat-hint></mat-hint>
        </mat-form-field>

        <mat-form-field *ngSwitchCase="'field'" class="field">
            <mat-label>
                <cc-label [node]="node"></cc-label>
            </mat-label>
            <input matInput [formControl]="node.control">
            <mat-hint></mat-hint>
        </mat-form-field>

        <mat-slide-toggle *ngSwitchCase="'toggle'">
            <cc-label [node]="node"></cc-label>
        </mat-slide-toggle>

        <div *ngSwitchDefault style="white-space: nowrap">
            <cc-label [node]="node"></cc-label>
            <span style="color:lightgray" *ngIf="!isRenderChildren && node.typeLabel">{{node}}</span>
        </div>

    </div>
    <div>
        <button mat-icon-button
                *ngIf="node.isRef"
                [attr.aria-label]="'open in tab'"
                (click)="findNode(node)"
                style="margin-left:5px">
            <mat-icon>link</mat-icon>
        </button>
        <button *ngIf="node.add" mat-icon-button class="icon-button" (click)="node.add()">
            <mat-icon>add</mat-icon>
            <mat-icon class="badge" *ngIf="node.getChildIcon" [color]="node.getChildIcon().color">
                {{node.getChildIcon().name}}
            </mat-icon>
        </button>
    </div>
    <mat-checkbox [ngModel]="!node.isNull" (ngModelChange)="node.isNull = !$event"
                  [disabled]="!node.isNullable"></mat-checkbox>
</div>
<ul *ngIf="isRenderChildren"
    class="list"
    [class.list__expanded]="expanded(node)"
    [class.list__root]="!isRenderRoot"
    [class.pair]="false">
    <li *ngFor="let child of node.children; index as i" class="list__item">
        <cc-node [node]="child" [findNode]="findNode" [expanded]="expanded" [toggle]="toggle"></cc-node>
    </li>
    <li *ngIf="node.add" class="list__item">
        <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign=" center" class="item">
            <div style="position: relative;white-space: nowrap">
                <button mat-icon-button class="icon-button">
                    <mat-icon></mat-icon>
                </button>
                <button mat-icon-button class="icon-button" (click)="node.add()">
                    <mat-icon>add</mat-icon>
                    <mat-icon class="badge" *ngIf="node.getChildIcon" [color]="node.getChildIcon().color">
                        {{node.getChildIcon().name}}
                    </mat-icon>
                </button>
            </div>
        </div>
    </li>
</ul>