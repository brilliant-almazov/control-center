<div class="mat-headline">Party claims</div>

<div fxLayout="column" fxLayoutGap="20px">
    <mat-card>
        <mat-card-content>
            <cc-search-form (valueChanges)="search($event)"></cc-search-form>
        </mat-card-content>
        <mat-card-footer *ngIf="(isLoading$ | async)">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </mat-card-footer>
    </mat-card>

    <mat-card>
        <mat-card-content>
            <ng-container *ngIf="!(isLoading$ | async)">
                <ng-container *ngIf="(claims$ | async) as claims">
                    <div fxLayout="row" fxLayoutAlign="center center" *ngIf="claims.length === 0">
                        <h3 class="mat-display-1 empty-result">Search result is empty</h3>
                    </div>
                </ng-container>
            </ng-container>
            <cc-claims-table
                *ngIf="(claims$ | async) as claims"
                [claims]="claims"
            ></cc-claims-table>
            <ng-container *ngIf="!(hasMore$ | async)">
                <div *ngIf="(isLoading$ | async)" fxLayout fxLayoutAlign="center stretch">
                    <mat-spinner diameter="40"></mat-spinner>
                </div>
            </ng-container>
            <div
                fxLayout="row"
                class="fetch-more"
                fxLayoutAlign="center center"
                *ngIf="(hasMore$ | async)"
            >
                <button mat-button (click)="fetchMore()" [disabled]="isLoading$ | async">
                    <span *ngIf="!(isLoading$ | async)">SHOW MORE</span>
                    <span *ngIf="(isLoading$ | async)">LOADING...</span>
                </button>
            </div>
        </mat-card-content>
    </mat-card>
</div>
